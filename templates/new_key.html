{% extends "base.html" %}

{% block head %}
<script src="/static/simple-webauthn.js"></script>
<script src="/static/register.js"></script>
{% endblock %}

{% block content %}
<div class="flex justify-between items-center py-2">
    <div class="flex items-center">
        <a href="/" class="heading">
            {% if is_link %}
            New Account
            {% else %}
            New Passkey
            {% endif %}
        </a>
    </div>
</div>
<div class="w-full mx-auto flex items-center justify-center">
    <span data-color="blue" id="color-preview" class="transition shield mb-1 mt-2 ~blue">
    <span class="icon w-16 h-16">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-14 h-14" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z" clip-rule="evenodd" />
        </svg>
    </span>
</span>
</div>
<div class="flex flex-col space-y-1">
    <div class="pb-4">
        <p class="label">Passkey Color</p>
        <div class="bg-gray-50 border rounded-md flex p-2 space-x-2">
            <button data-color="red" class="color-button shield ~red w-16 h-16"></button>
            <button data-color="green" class="color-button shield ~green w-16 h-16"></>
            <button data-color="blue" class="color-button shield ~blue w-16 h-16"></button>
            <button data-color="yellow" class="color-button shield ~yellow w-16 h-16"></button>
            <button data-color="purple" class="color-button shield ~purple w-16 h-16"></button>
        </div>
    </div>
    <div>
        <label for="name-field" class="label">Passkey Name</label>
        <input id="name-field" class="my-1 field ~blue" type="text" placeholder="Key McKeyFace">
        <p id="name-error" class="support ~red"></p>
    </div>
    {% if is_link %}
    <div>
        <label for="email-field" class="label">E-mail Address</label>
        <input id="email-field" class="my-1 field ~blue" type="email" placeholder="johndoe@example.com">
        <p id="email-error" class="support ~red"></p>
    </div>
    {% endif %}
    <button id="register-button" class="button ~neutral @low button-xl !mt-4">
        Register Passkey
    </button>
    <p id="button-error" class="invisible support ~red">Spooky invisible error label</p>
</div>
<div id="link-id" data-link="{{ link_id }}" class="hidden"></div>

{% endblock %}